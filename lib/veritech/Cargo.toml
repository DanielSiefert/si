[package]
name = "veritech"
version = "0.1.0"
edition = "2021"
rust-version = "1.56"
publish = false

[features]
# By default, no features are enabled--consumers of this crate need to opt-in
# to the features they desire.
default = []

# The client implementation for a veritech service.
client = [
  "cyclone-core",
  "futures-lite",
  "pin-project-lite",
]

# The server side implementation of veritech, as a library.
server = [
  "deadpool-cyclone",
  "derive_builder",
  "futures-lite",
  "pin-project-lite",
]

[dependencies]
# server and client dependencies
base64 = "0.13.0"
futures = { version = "0.3.17"}
serde = "1.0.123"
serde_json = { version = "1.0.64", features = ["preserve_order"] }
pin-project-lite = { version = "0.2.7", optional = true }
si-data = { path = "../../lib/si-data", features = ["nats"] }
si-settings = { path = "../../lib/si-settings" }
telemetry = { path = "../../lib/telemetry-rs" }
thiserror = { version = "1.0" }
tokio = { version = "1.2.0", features = ["full"] }
toml = "0.5"

# client only dependencies
cyclone-core = { path = "../../lib/cyclone-core", optional = true }

# server only dependencies
deadpool-cyclone = { path = "../../lib/deadpool-cyclone", optional = true }
derive_builder = { version = "0.11.2", optional = true }
futures-lite = { version = "1.12.0", optional = true }

[dev-dependencies]
indoc = "1.0.3"
test-log = { version = "0.2.7", default-features = false, features = ["trace"] }
tracing = { version = "0.1" }
tracing-subscriber = { version = "0.3.11", default-features = false, features = ["env-filter", "fmt"] }
uuid = { version = "1.0.0", features = ["v4"] }
