load(
    "@prelude-si//:macros.bzl",
    "docker_image",
)

docker_image(
    name = "ci-base",
    srcs = {
        "//:flake.nix": ".",
        "//:flake.lock": ".",
        "//:rust-toolchain": ".",
        "docker-entrypoint.sh": ".",
    },
    build_args = {
        "BASE_VERSION": "12-slim",
    },
    run_docker_args = [
        "--volume",
        "$PWD:/workdir",
        "--volume",
        "/workdir/buck-out",
        "--volume",
        "/workdir/target",
        "--volume",
        "/workdir/tmp",
        "--volume",
        "/workdir/third-party/rust/.cargo",
        "--volume",
        "/workdir/third-party/rust/vendor",
    ],
)
